#!/bin/bash
# Script to check ineternet connection if wifi is connected. To be used as Waybar module

if ! [ -e /tmp/netstatus ];
then
   touch /tmp/netstatus
   sleep 20;
fi

if $(iw dev wlan0 info | grep -q ssid);then
    wget -q --spider 1.1.1.1
    if !([ $? -eq 0 ]); then
        echo Offline! > /tmp/netstatus
        cat /tmp/netstatus
        exit 1
    else
        exit 0
    fi
else
    exit 1
fi
