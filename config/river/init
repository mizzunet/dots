#############
# VARIABLES #
#############
TERM=foot
FILES=pcmanfm-qt
MENU='fuzzel --prompt=" > " --font="JetBrains Mono":size=12:weight=light --lines=20 --width 25 --horizontal-pad=0 --inner-pad=4 --no-icons --background=171717ff --text-color=EDEDED95 --selection-color=DA0037ff --selection-text-color=EDEDEDff --match-color=D8E9A8ff --border-color=DA0037ff --border-radius=5 --border-width=2  --line-height=18 --no-fuzzy'
BROWSER=chromium
WALLPAPER=~/Pictures/pexels-c√°tia-matos-1072179.jpg
ALL_TAGS=$(((1 << 32) - 1))
#gtk-theme=''
#cursor-theme=''
#icon-theme=''
#font=''

MAP='riverctl map normal'
INPUT='riverctl input'
SPAWN='riverctl spawn'
CMD='riverctl'
ROTATE='wlr-randr --output eDP-1 --transform '
TOUCHPAD='pointer-1739-10608-SYN1B7E:01_06CB:2970_Touchpad'
KERNEL='xanmod-edge'
GSET='gsettings set'
INTERFACE='org.gnome.desktop.interface'

############
# MAPPINGS #
############
$MAP Super+Shift   Return spawn "$TERM"
$MAP Control+Shift escape spawn "$TERM htop"
$MAP Super          Space spawn "$MENU"
$MAP Super              e spawn "$FILES"
$MAP Super              b spawn "$BROWSER"
$MAP Super+Shift        m spawn "xdg-open https://mail.protonmail.com/u/0/all-mail#filter=unread"
$MAP Control+Alt+Shift Delete spawn "loginctl reboot"
$MAP Control+Alt   Delete spawn "_s-reboot"
$MAP Control       Escape spawn "dbus-send --print-reply --dest=org.freedesktop.Notifications /fr/emersion/Mako fr.emersion.Mako.DismissLastNotification" 
$MAP Control+Shift      E spawn "emote"
$MAP Control+Alt       Up spawn "$ROTATE normal && riverctl send-layout-cmd rivertile main-location right"
$MAP Control+Alt     Down spawn "$ROTATE 180 && riverctl send-layout-cmd rivertile main-location bottom"
$MAP Control+Alt    Right spawn "$ROTATE 270 && riverctl send-layout-cmd rivertile main-location right"
$MAP Control+Alt     Left spawn "$ROTATE 90 && riverctl send-layout-cmd rivertile main-location right"

## SCRIPTS
$MAP None          Print spawn "_s-screenshot select-copy"
$MAP Shift         Print spawn "_s-screenshot copy"
$MAP Super             c spawn "_d-clipboard clipman"
$MAP Control+Shift Print spawn "_s-screenrecord"
$MAP Alt+Shift         P spawn "_s-playwithmpv"
$MAP Alt               W spawn "_s-waydroid"
$MAP Super        Escape spawn "_s-blanket"

## CONTROLS
$MAP Super+Shift       C spawn "_c-swayidle"
$MAP Super+Shift       W spawn "_c-wifi-toggle"
$MAP Super+Shift       N spawn "_c-nightlight"
$MAP None  XF86AudioRaiseVolume spawn "_c-volume-change up"
$MAP None  XF86AudioLowerVolume spawn "_c-volume-change down"
#$MAP None  XF86AudioRaiseVolume spawn "_wpctl up"
#$MAP None  XF86AudioLowerVolume spawn "_wpctl down"
#$MAP None         XF86AudioMute spawn "_wpctl mute"
$MAP None   XF86MonBrightnessUp spawn "_c-brightness-change up"
$MAP None XF86MonBrightnessDown spawn "_c-brightness-change down"
$MAP Control         Space spawn 'playerctl play-pause && notify-send -u low -a control $(playerctl metadata | head -1 | cut -d" " -f1) $(playerctl status)'

## BUILT-IN COMMANDS
$MAP Super           Q  close
$MAP Super+Shift   End  exit
$MAP Super           J  focus-view next
$MAP Super           K  focus-view previous
$MAP Super+Shift     J  swap next
$MAP Super+Shift     K  swap previous
$MAP Super      Return  zoom
$MAP Super           H  send-layout-cmd rivertile "main-ratio -0.05"
$MAP Super           L  send-layout-cmd rivertile "main-ratio +0.05"
$MAP Super+Shift     H  send-layout-cmd rivertile "main-count -1"
$MAP Super+Shift     L  send-layout-cmd rivertile "main-count +1"
$MAP Super+Shift Space  toggle-float
$MAP Super           F  toggle-fullscreen
$MAP Super           Up send-layout-cmd rivertile "main-location top"
$MAP Super           Right send-layout-cmd rivertile "main-location right"
$MAP Super           Down send-layout-cmd rivertile "main-location bottom"
$MAP Super           Left send-layout-cmd rivertile "main-location left"

## HELIX KEYBINDING FOR EDITING
#$CMD declare-mode helix
#riverctl map helix None h spawn "wtype -P Left"
#riverctl map helix None l spawn "wtype -P Right"
#riverctl map helix None j spawn "wtype -P Down"
#riverctl map helix None k spawn "wtype -P Up"
#riverctl map helix None d spawn "wtype -P BackSpace"
#riverctl map helix None i spawn "riverctl enter-mode normal && notify-send -u low 'Normal mode'"
#riverctl map helix None a spawn "wtype -P Right && riverctl enter-mode normal && notify-send -u low 'Normal mode'"
#riverctl map helix None I spawn "wtype -P Home  && riverctl enter-mode normal && notify-send -u low 'Normal mode'"
#riverctl map helix None A spawn "wtype -P End   && riverctl enter-mode normal && notify-send -u low 'Normal mode'"
#riverctl map helix None w spawn "wtype -M ctrl -P Right"
#riverctl map helix None b spawn "wtype -M ctrl -P Left"
#riverctl map helix None c spawn "wtype -P BackSapce && riverctl enter-mode normal"
#riverctl map helix None x spawn "wtype -P BackSapce"
#riverctl map helix None u spawn "wtype -M ctrl z"
#riverctl map helix None U spawn "wtype -M ctrl+Shift z"
#riverctl map helix None Alt_R spawn "riverctl enter-mode normal && notify-send -u low 'Normal mode'"
#riverctl map normal None Alt_R spawn "riverctl enter-mode helix && notify-send -u low 'Helix mode'"
riverctl map normal None KP_Insert spawn "wtype -P Right"
riverctl map normal Control KP_Insert spawn "wtype -P XF86MonBrightnessUp"

## TAGS
$MAP Super 0 set-focused-tags $ALL_TAGS
$MAP Super+Shift 0 set-view-tags $ALL_TAGS
for i in $(seq 1 9)
do
    tags=$((1 << ($i - 1)))

    $MAP Super $i set-focused-tags $tags
    $MAP Super+Shift $i set-view-tags $tags
done

$CMD map-pointer normal Super BTN_RIGHT resize-view
$CMD map-pointer normal Super BTN_LEFT move-view

##########
# SPAWNS #
##########
$SPAWN yambar
$SPAWN "swaybg -i $WALLPAPER"
$SPAWN "mako"
$SPAWN "dbus-daemon --session --address=unix:path=$XDG_RUNTIME_DIR/bus"
$SPAWN "systemctl --user import-environment"
#$SPAWN "hydroxide -disable-carddav -imap-host 127.0.0.1 -smtp-host 127.0.0.1 serve 2&> /tmp/hydroxide"
#$SPAWN "geary --gapplication-service"
$SPAWN "/usr/lib/polkit-kde-authentication-agent-1"
$SPAWN "_c-swayidle"
$SPAWN "_c-nightlight"
$SPAWN "_d-udiskie"
$SPAWN "_d-battery"
$SPAWN "_d-clipboard watcher"
#$SPWAN "signal-desktop-beta --start-in-tray --no-sandbox"

#$SPAWN "$GSET $INTERFACE gtk-theme adw-gtk3-dark"
#$SPAWN "$GSET $INTERFACE icon-theme breeze-dark"
#$SPAWN "$GSET $INTERFACE cursor-theme Adwaita"
#$SPAWN "$GSET $INTERFACE font-name Proxima Nova 11.3"
#$SPAWN "$GSET $INTERFACE enable-animations false"
#$SPAWN "$GSET $INTERFACE color-scheme prefer-dark"
#$SPAWN "$GSET org.gtk.Settings.FileChooser window-size '(740, 371)'"
#$SPAWN "$GSET org.gtk.Settings.FileChooser startup-mode \'cwd\' 
#$SPAWN "$GSET org.gnome.desktop.default-applications.terminal exec $term"
#$SPAWN "$GSET org.gnome.desktop.default-applications.terminal exec-arg ''"
#gsettings set org.gnome.desktop.wm.preferences button-layout ""

################
# INPUT CONFIG #
################
$INPUT $TOUCHPAD accel-profile adaptive
$INPUT $TOUCHPAD pointer-accel 0.5
$INPUT $TOUCHPAD tap enabled
$INPUT $TOUCHPAD tap-button-map left-right-middle

##################
# CONFIGURATIONS #
##################
FLOATS_app_id=(gnome-pomodoro qalculate-gtk qalculate-qt org.kde.polkit-kde-authentication-agent-1)
for w in ${FLOATS_app_id[@]}
do
    $CMD float-filter-add app-id $w
done
FLOATS_title=("Open File")
for w in ${FLOATS_title[@]}
do
    $CMD float-filter-add title "$w"
done

$CMD focus-follows-cursor normal
$CMD set-repeat 60 250
$CMD border-color-focused 0xE5E9F0
$CMD border-color-unfocused 0x3B4252
$CMD border-color-urgent 0x88C0D0
$CMD border-width 2

$CMD default-layout rivertile
// exec rivertile -view-padding 2 -main-location top -main-count 2
exec rivertile -view-padding 2
